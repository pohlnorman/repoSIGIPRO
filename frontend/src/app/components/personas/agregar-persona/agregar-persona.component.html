<app-navbar></app-navbar>
<div class="container">
    <h2 class="mt-3 mb-4 pb-2 title-border">{{tilulo}} persona</h2>

    <div class="card mb-3">
        <div class="card-header text-center">Persona</div>
        <div class="card-body">

            <form [formGroup]="form" (ngSubmit)="onSubmit()">

                <div class="row">
                    <div class="col-lg">
                        <div class="mb-3">
                            <label class="form-label">Rut<span class="text-danger">*</span><span class="form-text"> (Sin
                                    puntos con guion)</span>
                            </label>
                            <input formControlName="rut" type="text" class="form-control" placeholder="Ingrese rut">
                            <span *ngIf="form.get('rut')?.hasError('required') && form.get('rut')?.touched"
                                class="text-danger">El campo rut es <strong>requerido.</strong>
                            </span>
                            <span *ngIf="form.get('rut')?.hasError('rutInvalido') && form.get('rut')?.touched"
                                class="text-danger"> Formato <strong>incorrecto.</strong>
                            </span>
                        </div>
                    </div>
                    <div class="col-lg">
                        <div class="mb-3">
                            <label class="form-label">Nombre<span class="text-danger">*</span></label>
                            <input formControlName="nombre" type="text" class="form-control"
                                placeholder="Ingrese nombre">
                            <span *ngIf="form.get('nombre')?.hasError('required') && form.get('nombre')?.touched"
                                class="text-danger">El campo nombre es <strong>requerido</strong>
                            </span>
                        </div>
                    </div>
                    <div class="col-lg">
                        <div class="mb-3">
                            <label class="form-label">Apellido<span class="text-danger">*</span></label>
                            <input formControlName="apellido" type="text" class="form-control"
                                placeholder="Ingrese apellido">
                            <span *ngIf="form.get('apellido')?.hasError('required') && form.get('apellido')?.touched"
                                class="text-danger">El campo apellido es <strong>requerido</strong>
                            </span>
                        </div>
                    </div>
                </div>
                <hr class="border-top border-1 border-secondary">
                <button type="button" class="btn btn-outline-info mb-3" (click)="collapse.toggle()"
                    [attr.aria-expanded]="!isCollapsed" aria-controls="collapseExample">
                    Campos adicionales
                </button>
                <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsed">
                    <div class="row">
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Nacionalidad</label>
                                <input formControlName="nacionalidad" type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Fecha Nacimiento</label>
                                <input formControlName="fechaNacimiento" type="Date" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Estado Civil</label>
                                <input formControlName="estadoCivil" type="text" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Profesion</label>
                                <input formControlName="prefesion" type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Telefono (9 digitos)</label>
                                <input formControlName="telefono" type="text" class="form-control">
                                @if (form.get('telefono')?.hasError('pattern') && form.get('telefono')?.touched) {
                                <p class="mb-0 text-danger"> Formato invalido.</p>
                                }
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Email</label>
                                <input formControlName="email" type="email" class="form-control">
                                @if (form.get('email')?.hasError('email') && form.get('email')?.touched) {
                                <p class="mb-0 text-danger">Email invalido.</p>
                                }
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Direccion</label>
                                <input formControlName="direccion" type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Region</label>
                                <input formControlName="region" type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Comuna</label>
                                <input formControlName="comuna" type="text" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">AFP</label>
                                <input formControlName="afp" type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Salud</label>
                                <input formControlName="salud" type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg">

                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Talla Camisa</label>
                                <select class="form-select " formControlName="tallaCamisa">
                                    <option value=''>-- Opciones --</option>
                                    @for (tallaCamisa of tallaCamisas; track tallaCamisa){
                                    <option [value]="tallaCamisa">{{ tallaCamisa }}</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Talla Pantalon</label>
                                <select class="form-select " formControlName="tallaPantalon">
                                    <option value=''>-- Opciones --</option>
                                    @for (tallaPantalon of tallaPantalones; track tallaPantalon){
                                    <option [value]="tallaPantalon">{{ tallaPantalon }}</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Talla Zapato</label>
                                <select class="form-select " formControlName="tallaZapato">
                                    <option value=''>-- Opciones --</option>
                                    @for (tallaZapato of tallaZapatos; track tallaZapato){
                                    <option [value]="tallaZapato">{{ tallaZapato }}</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Talla Poleron</label>
                                <select class="form-select " formControlName="tallaPoleron">
                                    <option value=''>-- Opciones --</option>
                                    @for (tallaPoleron of tallaLetras; track tallaPoleron){
                                    <option [value]="tallaPoleron">{{ tallaPoleron }}</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Talla Parka</label>
                                <select class="form-select " formControlName="tallaParka">
                                    <option value=''>-- Opciones --</option>
                                    @for (tallaParka of tallaLetras; track tallaParka){
                                    <option [value]="tallaParka">{{ tallaParka }}</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Talla Oberol</label>
                                <select class="form-select " formControlName="tallaOberol">
                                    <option value=''>-- Opciones --</option>
                                    @for (tallaOberol of tallaLetras; track tallaOberol){
                                    <option [value]="tallaOberol">{{ tallaOberol }}</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Examen Vista</label>
                                <input formControlName="examenVista" type="Date" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Examen Altura</label>
                                <input formControlName="examenAltura" type="Date" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg">
                            <div class="mb-3">
                                <label class="form-label">Examen General</label>
                                <input formControlName="examenGeneral" type="Date" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-between">
                    <button [disabled]="form.invalid" type="submit" class="btn btn-primary">Guardar</button>
                    <a class="btn btn-secondary" (click)="backClicked()" role="button">Cancelar</a>
                </div>
            </form>

        </div>
    </div>
</div>